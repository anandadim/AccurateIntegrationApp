-- Table: public.sales_invoice_items

-- DROP TABLE IF EXISTS public.sales_invoice_items;

CREATE TABLE IF NOT EXISTS public.sales_invoice_items
(
    id integer NOT NULL DEFAULT nextval('sales_invoice_items_id_seq'::regclass),
    invoice_id integer NOT NULL,
    branch_id character varying(50) COLLATE pg_catalog."default" NOT NULL,
    item_no character varying(100) COLLATE pg_catalog."default" NOT NULL,
    item_name text COLLATE pg_catalog."default",
    quantity numeric(15,2) NOT NULL,
    unit_name character varying(50) COLLATE pg_catalog."default",
    unit_price numeric(15,2) NOT NULL,
    discount numeric(15,2) DEFAULT 0,
    amount numeric(15,2) NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    warehouse_name character varying(100) COLLATE pg_catalog."default",
    salesman_name character varying(100) COLLATE pg_catalog."default",
    item_category character varying(100) COLLATE pg_catalog."default",
    seq bigint,
    CONSTRAINT sales_invoice_items_pkey PRIMARY KEY (id),
    CONSTRAINT sales_invoice_items_unique_seq UNIQUE (invoice_id, branch_id, seq),
    CONSTRAINT sales_invoice_items_invoice_id_fkey FOREIGN KEY (invoice_id)
        REFERENCES public.sales_invoices (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE CASCADE
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.sales_invoice_items
    OWNER to postgres;
-- Index: idx_invoice_items

-- DROP INDEX IF EXISTS public.idx_invoice_items;

CREATE INDEX IF NOT EXISTS idx_invoice_items
    ON public.sales_invoice_items USING btree
    (invoice_id ASC NULLS LAST)
    WITH (fillfactor=100, deduplicate_items=True)
    TABLESPACE pg_default;
-- Index: idx_item_no

-- DROP INDEX IF EXISTS public.idx_item_no;

CREATE INDEX IF NOT EXISTS idx_item_no
    ON public.sales_invoice_items USING btree
    (item_no COLLATE pg_catalog."default" ASC NULLS LAST)
    WITH (fillfactor=100, deduplicate_items=True)
    TABLESPACE pg_default;